{% extends "base.html" %}
{% block head %}
{{ super() }}
{% endblock %}
{% block title %}Sign{% endblock %}

{% block nav %}
  {% include "nav-admin.html" %}
{% endblock %}

{% block alert %}

{% if alert.info is not none %}
<div class="alert alert-info alert-dismissable" role="alert">
    {{ alert.info }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endif %}

{% if alert.success is not none %}
<div class="alert alert-success alert-dismissable" role="alert">
    {{ alert.success }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endif %}

{% if alert.warning is not none %}
<div class="alert alert-warning alert-dismissable" role="alert">
    {{ alert.warning }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endif %}

{% if alert.danger is not none %}
<div class="alert alert-danger alert-dismissable" role="alert">
    {{ alert.danger }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endif %}

{% endblock %}
{% block content %}

<div>
    <h2 class="orcid">{{ name }}</h2>
    <h4 class="orcid">{{ orcid_id }}</h4>
</div>

<!-- Introduction -->
<div class="sign">
    <h3>Sign the {{ action_kind }}</h3>
    {% if allow_anonymous %}
    <p>
        Please choose whether you would like your name to appear in the signatory list or if you would like to remain anonymous, and then click Sign. You may add your professional affiliation (optional) in the text box below. These choices may be updated at any time.
    </p>
    {% else %}
    <p>
        This {{ action_kind }} does not allow anonymous signing. Please choose to add your name to the signatory list and then click Sign. You may add your professional affiliation (optional) in the text box below. These choices may be updated at any time.
    </p>
    {% endif %}

    <form action="{{ user_uri_defined }}" method="POST" id="update_info">
        <input type="hidden" name="mode" value="update_info">
        <div class="form-choice-margin">
            <input type="radio" id="named" name="anonymous" value="False" required {% if anonymous is false %}checked{% endif %}>
            <label for="named">Please show my name in the signatory list</label><br>
            {% if allow_anonymous %}
            <input type="radio" id="anonymous" name="anonymous" value="True" {% if anonymous is true %}checked{% endif %}>
            <label for="anonymous">I would like to remain anonymous</label><br>
            {% endif %}
        </div>
        <div class="row col-md-8">
            <input type="text" class="form-control" name="affiliation" placeholder="Affiliation (optional)" value="{{ affiliation }}">
        </div>
        <div class="col-md-4">
            <button type="submit" class="btn btn-success">Sign</button>  <a href="{{ logout_uri }}"><button type="button" class="btn btn-primary">Log out</button></a>
        </div>
    </form>

</div>


{% if in_database is true %}
<div class="remove">
    <h3>Remove my signature</h3>
    <p>
    If you would like to remove your signature and delete all your data related to this {{ action_kind | lower }}, type "delete" in the input box below.
    </p>

    <form action="{{ user_uri_defined }}" method="POST" id="delete_account">
        <!-- Column 1: input box -->
        <div class="row col-md-8">
            <input type="hidden" name="mode" value="delete">
            <input type="text" class="form-control" name="confirmation" placeholder="">
        </div>
        <!-- Column 2: submit button -->
        <div class="col-md-2">
            <button type="submit" class="btn btn-danger">Delete</button>
        </div>
    </form>

</div>
{% endif %}

{% endblock %}
